{"ast":null,"code":"var _jsxFileName = \"/home/someone/kucoin/tesnet20_08/amm-front/src/pages/AddLiquidity/index.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport { BigNumber } from '@ethersproject/bignumber';\nimport { currencyEquals, ETHER, WETH } from '@pancakeswap-libs/sdk-v2';\nimport { Button, CardBody, AddIcon, Text as UIKitText, Flex } from '@pancakeswap-libs/uikit';\nimport { LightCard } from 'components/Card';\nimport { AutoColumn, ColumnCenter } from 'components/Column';\nimport TransactionConfirmationModal, { ConfirmationModalContent } from 'components/TransactionConfirmationModal';\nimport CardNav from 'components/CardNav';\nimport CurrencyInputPanel from 'components/CurrencyInputPanel';\nimport DoubleCurrencyLogo from 'components/DoubleLogo';\nimport { AddRemoveTabs } from 'components/NavigationTabs';\nimport { MinimalPositionCard } from 'components/PositionCard';\nimport Row, { RowBetween, RowFlat } from 'components/Row';\nimport { PairState } from 'data/Reserves';\nimport { useActiveWeb3React } from 'hooks';\nimport { useCurrency } from 'hooks/Tokens';\nimport { ApprovalState, useApproveCallback } from 'hooks/useApproveCallback';\nimport { Field } from 'state/mint/actions';\nimport { useDerivedMintInfo, useMintActionHandlers, useMintState } from 'state/mint/hooks';\nimport { useTransactionAdder } from 'state/transactions/hooks';\nimport { useIsExpertMode, useUserDeadline, useUserSlippageTolerance } from 'state/user/hooks';\nimport { TYPE } from 'components/Shared';\nimport { calculateGasMargin, calculateSlippageAmount, getRouterContract } from 'utils';\nimport { maxAmountSpend } from 'utils/maxAmountSpend';\nimport { wrappedCurrency } from 'utils/wrappedCurrency';\nimport { currencyId } from 'utils/currencyId';\nimport Pane from 'components/Pane';\nimport ConnectWalletButton from 'components/ConnectWalletButton';\nimport AppBody from '../AppBody';\nimport { Dots, Wrapper } from '../Pool/styleds';\nimport { ConfirmAddModalBottom } from './ConfirmAddModalBottom';\nimport { PoolPriceBar } from './PoolPriceBar';\nimport { ROUTER_ADDRESS } from '../../constants';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst {\n  italic: Italic\n} = TYPE;\nconst StyledSwapButton = styled(Button)`\n  background-color: #48cae4;\n  box-shadow: none;\n  transition: all 0.2s ease-in-out;\n  border: 2px solid white;\n  font-size: 20px;\n  font-weight: 600;\n\n  &:hover {\n    background-color: #fff;\n    border: 2px solid #48cae4 !important;\n    color: #48cae4;\n\n    & > svg,\n    & > svg > * {\n      fill: #48cae4;\n    }\n  }\n\n  &:focus {\n    box-shadow: none !important;\n  }\n\n  &:active {\n    background-color: #fff;\n  }\n`;\n_c = StyledSwapButton;\nconst StyledAutoColumn = styled(AutoColumn)`\n  display : flex;\n\n  & > img {\n    margin-right: 25px;\n  }\n`;\n_c2 = StyledAutoColumn;\nconst StyledUIKitText = styled(UIKitText)`\n  text-align: justify;\n`;\n_c3 = StyledUIKitText;\nconst RedStyledUIKitText = styled(StyledUIKitText)`\n  color: #ff629a;\n  font-weight: 600;\n`;\n_c4 = RedStyledUIKitText;\nexport default function AddLiquidity({\n  match: {\n    params: {\n      currencyIdA,\n      currencyIdB\n    }\n  },\n  history\n}) {\n  _s();\n\n  var _parsedAmounts$depend, _parsedAmounts$depend2, _parsedAmounts$Field$3, _currencies$Field$CUR7, _parsedAmounts$Field$4, _currencies$Field$CUR8, _currencies$Field$CUR9, _currencies$Field$CUR10, _currencies$Field$CUR11, _currencies$Field$CUR12;\n\n  const {\n    account,\n    chainId,\n    library\n  } = useActiveWeb3React();\n  const currencyA = useCurrency(currencyIdA);\n  const currencyB = useCurrency(currencyIdB);\n  const oneCurrencyIsWETH = Boolean(chainId && (currencyA && currencyEquals(currencyA, WETH[chainId]) || currencyB && currencyEquals(currencyB, WETH[chainId])));\n  const expertMode = useIsExpertMode(); // mint state\n\n  const {\n    independentField,\n    typedValue,\n    otherTypedValue\n  } = useMintState();\n  const {\n    dependentField,\n    currencies,\n    pair,\n    pairState,\n    currencyBalances,\n    parsedAmounts,\n    price,\n    noLiquidity,\n    liquidityMinted,\n    poolTokenPercentage,\n    error\n  } = useDerivedMintInfo(currencyA !== null && currencyA !== void 0 ? currencyA : undefined, currencyB !== null && currencyB !== void 0 ? currencyB : undefined);\n  const {\n    onFieldAInput,\n    onFieldBInput\n  } = useMintActionHandlers(noLiquidity);\n  const isValid = !error; // modal and loading\n\n  const [showConfirm, setShowConfirm] = useState(false);\n  const [attemptingTxn, setAttemptingTxn] = useState(false); // clicked confirm\n  // txn values\n\n  const [deadline] = useUserDeadline(); // custom from users settings\n\n  const [allowedSlippage] = useUserSlippageTolerance(); // custom from users\n\n  const [txHash, setTxHash] = useState(''); // get formatted amounts\n\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: noLiquidity ? otherTypedValue : (_parsedAmounts$depend = (_parsedAmounts$depend2 = parsedAmounts[dependentField]) === null || _parsedAmounts$depend2 === void 0 ? void 0 : _parsedAmounts$depend2.toSignificant(6)) !== null && _parsedAmounts$depend !== void 0 ? _parsedAmounts$depend : ''\n  }; // get the max amounts user can add\n\n  const maxAmounts = [Field.CURRENCY_A, Field.CURRENCY_B].reduce((accumulator, field) => {\n    return { ...accumulator,\n      [field]: maxAmountSpend(currencyBalances[field])\n    };\n  }, {});\n  const atMaxAmounts = [Field.CURRENCY_A, Field.CURRENCY_B].reduce((accumulator, field) => {\n    var _maxAmounts$field, _parsedAmounts$field;\n\n    return { ...accumulator,\n      [field]: (_maxAmounts$field = maxAmounts[field]) === null || _maxAmounts$field === void 0 ? void 0 : _maxAmounts$field.equalTo((_parsedAmounts$field = parsedAmounts[field]) !== null && _parsedAmounts$field !== void 0 ? _parsedAmounts$field : '0')\n    };\n  }, {}); // check whether the user has approved the router on the tokens\n\n  const [approvalA, approveACallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_A], ROUTER_ADDRESS);\n  const [approvalB, approveBCallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_B], ROUTER_ADDRESS);\n  const addTransaction = useTransactionAdder();\n\n  async function onAdd() {\n    if (!chainId || !library || !account) return;\n    const router = getRouterContract(chainId, library, account);\n    const {\n      [Field.CURRENCY_A]: parsedAmountA,\n      [Field.CURRENCY_B]: parsedAmountB\n    } = parsedAmounts;\n\n    if (!parsedAmountA || !parsedAmountB || !currencyA || !currencyB) {\n      return;\n    }\n\n    const amountsMin = {\n      [Field.CURRENCY_A]: calculateSlippageAmount(parsedAmountA, noLiquidity ? 0 : allowedSlippage)[0],\n      [Field.CURRENCY_B]: calculateSlippageAmount(parsedAmountB, noLiquidity ? 0 : allowedSlippage)[0]\n    };\n    const deadlineFromNow = Math.ceil(Date.now() / 1000) + deadline;\n    let estimate;\n    let method;\n    let args;\n    let value;\n\n    if (currencyA === ETHER || currencyB === ETHER) {\n      var _wrappedCurrency$addr, _wrappedCurrency;\n\n      const tokenBIsETH = currencyB === ETHER;\n      estimate = router.estimateGas.addLiquidityETH;\n      method = router.addLiquidityETH;\n      args = [(_wrappedCurrency$addr = (_wrappedCurrency = wrappedCurrency(tokenBIsETH ? currencyA : currencyB, chainId)) === null || _wrappedCurrency === void 0 ? void 0 : _wrappedCurrency.address) !== null && _wrappedCurrency$addr !== void 0 ? _wrappedCurrency$addr : '', // token\n      (tokenBIsETH ? parsedAmountA : parsedAmountB).raw.toString(), // token desired\n      amountsMin[tokenBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(), // token min\n      amountsMin[tokenBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(), // eth min\n      account, deadlineFromNow];\n      value = BigNumber.from((tokenBIsETH ? parsedAmountB : parsedAmountA).raw.toString());\n    } else {\n      var _wrappedCurrency$addr2, _wrappedCurrency2, _wrappedCurrency$addr3, _wrappedCurrency3;\n\n      estimate = router.estimateGas.addLiquidity;\n      method = router.addLiquidity;\n      args = [(_wrappedCurrency$addr2 = (_wrappedCurrency2 = wrappedCurrency(currencyA, chainId)) === null || _wrappedCurrency2 === void 0 ? void 0 : _wrappedCurrency2.address) !== null && _wrappedCurrency$addr2 !== void 0 ? _wrappedCurrency$addr2 : '', (_wrappedCurrency$addr3 = (_wrappedCurrency3 = wrappedCurrency(currencyB, chainId)) === null || _wrappedCurrency3 === void 0 ? void 0 : _wrappedCurrency3.address) !== null && _wrappedCurrency$addr3 !== void 0 ? _wrappedCurrency$addr3 : '', parsedAmountA.raw.toString(), parsedAmountB.raw.toString(), amountsMin[Field.CURRENCY_A].toString(), amountsMin[Field.CURRENCY_B].toString(), account, deadlineFromNow];\n      value = null;\n    }\n\n    setAttemptingTxn(true); // const aa = await estimate(...args, value ? { value } : {})\n\n    await estimate(...args, value ? {\n      value\n    } : {}).then(estimatedGasLimit => method(...args, { ...(value ? {\n        value\n      } : {}),\n      gasLimit: calculateGasMargin(estimatedGasLimit)\n    }).then(response => {\n      var _parsedAmounts$Field$, _currencies$Field$CUR, _parsedAmounts$Field$2, _currencies$Field$CUR2;\n\n      setAttemptingTxn(false);\n      addTransaction(response, {\n        summary: `Add ${(_parsedAmounts$Field$ = parsedAmounts[Field.CURRENCY_A]) === null || _parsedAmounts$Field$ === void 0 ? void 0 : _parsedAmounts$Field$.toSignificant(3)} ${(_currencies$Field$CUR = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR === void 0 ? void 0 : _currencies$Field$CUR.symbol} and ${(_parsedAmounts$Field$2 = parsedAmounts[Field.CURRENCY_B]) === null || _parsedAmounts$Field$2 === void 0 ? void 0 : _parsedAmounts$Field$2.toSignificant(3)} ${(_currencies$Field$CUR2 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR2 === void 0 ? void 0 : _currencies$Field$CUR2.symbol}`\n      });\n      setTxHash(response.hash);\n    })).catch(e => {\n      setAttemptingTxn(false); // we only care if the error is something _other_ than the user rejected the tx\n\n      if ((e === null || e === void 0 ? void 0 : e.code) !== 4001) {\n        console.error(e);\n      }\n    });\n  }\n\n  const modalHeader = () => {\n    var _currencies$Field$CUR3, _currencies$Field$CUR4, _currencies$Field$CUR5, _currencies$Field$CUR6;\n\n    return noLiquidity ? /*#__PURE__*/_jsxDEV(AutoColumn, {\n      gap: \"20px\",\n      children: /*#__PURE__*/_jsxDEV(LightCard, {\n        mt: \"20px\",\n        borderRadius: \"20px\",\n        children: /*#__PURE__*/_jsxDEV(RowFlat, {\n          children: [/*#__PURE__*/_jsxDEV(UIKitText, {\n            fontSize: \"48px\",\n            mr: \"8px\",\n            children: `${(_currencies$Field$CUR3 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR3 === void 0 ? void 0 : _currencies$Field$CUR3.symbol}/${(_currencies$Field$CUR4 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR4 === void 0 ? void 0 : _currencies$Field$CUR4.symbol}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(DoubleCurrencyLogo, {\n            currency0: currencies[Field.CURRENCY_A],\n            currency1: currencies[Field.CURRENCY_B],\n            size: 30\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(AutoColumn, {\n      gap: \"20px\",\n      children: [/*#__PURE__*/_jsxDEV(RowFlat, {\n        style: {\n          marginTop: '20px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(UIKitText, {\n          fontSize: \"48px\",\n          mr: \"8px\",\n          children: liquidityMinted === null || liquidityMinted === void 0 ? void 0 : liquidityMinted.toSignificant(6)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(DoubleCurrencyLogo, {\n          currency0: currencies[Field.CURRENCY_A],\n          currency1: currencies[Field.CURRENCY_B],\n          size: 30\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(UIKitText, {\n          fontSize: \"24px\",\n          children: `${(_currencies$Field$CUR5 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR5 === void 0 ? void 0 : _currencies$Field$CUR5.symbol}/${(_currencies$Field$CUR6 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR6 === void 0 ? void 0 : _currencies$Field$CUR6.symbol} Pool Tokens`\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Italic, {\n        fontSize: 12,\n        textAlign: \"center\",\n        padding: \"8px 0 0 0 \",\n        children: `Estimated price. If the price changes by more than ${allowedSlippage / 100}% your transaction will revert (according to your slippage settings).`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 7\n    }, this);\n  };\n\n  const modalBottom = () => {\n    return /*#__PURE__*/_jsxDEV(ConfirmAddModalBottom, {\n      price: price,\n      currencies: currencies,\n      parsedAmounts: parsedAmounts,\n      noLiquidity: noLiquidity,\n      onAdd: onAdd,\n      poolTokenPercentage: poolTokenPercentage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 285,\n      columnNumber: 7\n    }, this);\n  };\n\n  const pendingText = `Supplying ${(_parsedAmounts$Field$3 = parsedAmounts[Field.CURRENCY_A]) === null || _parsedAmounts$Field$3 === void 0 ? void 0 : _parsedAmounts$Field$3.toSignificant(6)} ${(_currencies$Field$CUR7 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR7 === void 0 ? void 0 : _currencies$Field$CUR7.symbol} and ${(_parsedAmounts$Field$4 = parsedAmounts[Field.CURRENCY_B]) === null || _parsedAmounts$Field$4 === void 0 ? void 0 : _parsedAmounts$Field$4.toSignificant(6)} ${(_currencies$Field$CUR8 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR8 === void 0 ? void 0 : _currencies$Field$CUR8.symbol}`;\n  const handleCurrencyASelect = useCallback(currA => {\n    const newCurrencyIdA = currencyId(currA);\n\n    if (newCurrencyIdA === currencyIdB) {\n      history.push(`/add/${currencyIdB}/${currencyIdA}`);\n    } else {\n      history.push(`/add/${newCurrencyIdA}/${currencyIdB}`);\n    }\n  }, [currencyIdB, history, currencyIdA]);\n  const handleCurrencyBSelect = useCallback(currB => {\n    const newCurrencyIdB = currencyId(currB);\n\n    if (currencyIdA === newCurrencyIdB) {\n      if (currencyIdB) {\n        history.push(`/add/${currencyIdB}/${newCurrencyIdB}`);\n      } else {\n        history.push(`/add/${newCurrencyIdB}`);\n      }\n    } else {\n      history.push(`/add/${currencyIdA || 'ETH'}/${newCurrencyIdB}`);\n    }\n  }, [currencyIdA, history, currencyIdB]);\n  const handleDismissConfirmation = useCallback(() => {\n    setShowConfirm(false); // if there was a tx hash, we want to clear the input\n\n    if (txHash) {\n      onFieldAInput('');\n    }\n\n    setTxHash('');\n  }, [onFieldAInput, txHash]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(CardNav, {\n      activeIndex: 1\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AppBody, {\n      children: [/*#__PURE__*/_jsxDEV(AddRemoveTabs, {\n        adding: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Wrapper, {\n        children: [/*#__PURE__*/_jsxDEV(TransactionConfirmationModal, {\n          isOpen: showConfirm,\n          onDismiss: handleDismissConfirmation,\n          attemptingTxn: attemptingTxn,\n          hash: txHash,\n          content: () => /*#__PURE__*/_jsxDEV(ConfirmationModalContent, {\n            title: noLiquidity ? 'You are creating a pool' : 'You will receive',\n            onDismiss: handleDismissConfirmation,\n            topContent: modalHeader,\n            bottomContent: modalBottom\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 349,\n            columnNumber: 15\n          }, this),\n          pendingText: pendingText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 343,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CardBody, {\n          children: /*#__PURE__*/_jsxDEV(AutoColumn, {\n            gap: \"20px\",\n            children: [noLiquidity && /*#__PURE__*/_jsxDEV(ColumnCenter, {\n              children: /*#__PURE__*/_jsxDEV(Pane, {\n                children: /*#__PURE__*/_jsxDEV(StyledAutoColumn, {\n                  gap: \"12px\",\n                  children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                    src: \"/images/common/cupcake-analyst.png\",\n                    alt: \"analyst\",\n                    width: 190\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 364,\n                    columnNumber: 23\n                  }, this), /*#__PURE__*/_jsxDEV(Flex, {\n                    flexDirection: \"column\",\n                    alignItems: \"flex-start\",\n                    justifyContent: \"space-evenly\",\n                    children: [/*#__PURE__*/_jsxDEV(RedStyledUIKitText, {\n                      children: \"\\u26A0\\uFE0F You are the first liquidity provider!\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 366,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(StyledUIKitText, {\n                      children: \"The ratio of tokens you add will set the price of this pool.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 367,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(StyledUIKitText, {\n                      children: \"Once you are happy with the rate click supply to review.\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 368,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 365,\n                    columnNumber: 23\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 363,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 362,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CurrencyInputPanel, {\n              value: formattedAmounts[Field.CURRENCY_A],\n              onUserInput: onFieldAInput,\n              onMax: () => {\n                var _maxAmounts$Field$CUR, _maxAmounts$Field$CUR2;\n\n                onFieldAInput((_maxAmounts$Field$CUR = (_maxAmounts$Field$CUR2 = maxAmounts[Field.CURRENCY_A]) === null || _maxAmounts$Field$CUR2 === void 0 ? void 0 : _maxAmounts$Field$CUR2.toExact()) !== null && _maxAmounts$Field$CUR !== void 0 ? _maxAmounts$Field$CUR : '');\n              },\n              onCurrencySelect: handleCurrencyASelect,\n              showMaxButton: !atMaxAmounts[Field.CURRENCY_A],\n              currency: currencies[Field.CURRENCY_A],\n              id: \"add-liquidity-input-tokena\",\n              showCommonBases: false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 374,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(ColumnCenter, {\n              children: /*#__PURE__*/_jsxDEV(AddIcon, {\n                color: \"textSubtle\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 387,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 386,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(CurrencyInputPanel, {\n              value: formattedAmounts[Field.CURRENCY_B],\n              onUserInput: onFieldBInput,\n              onCurrencySelect: handleCurrencyBSelect,\n              onMax: () => {\n                var _maxAmounts$Field$CUR3, _maxAmounts$Field$CUR4;\n\n                onFieldBInput((_maxAmounts$Field$CUR3 = (_maxAmounts$Field$CUR4 = maxAmounts[Field.CURRENCY_B]) === null || _maxAmounts$Field$CUR4 === void 0 ? void 0 : _maxAmounts$Field$CUR4.toExact()) !== null && _maxAmounts$Field$CUR3 !== void 0 ? _maxAmounts$Field$CUR3 : '');\n              },\n              showMaxButton: !atMaxAmounts[Field.CURRENCY_B],\n              currency: currencies[Field.CURRENCY_B],\n              id: \"add-liquidity-input-tokenb\",\n              showCommonBases: false\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 389,\n              columnNumber: 15\n            }, this), currencies[Field.CURRENCY_A] && currencies[Field.CURRENCY_B] && pairState !== PairState.INVALID && /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(StyledUIKitText, {\n                style: {\n                  textTransform: 'uppercase',\n                  fontWeight: 600,\n                  textAlign: \"center\",\n                  color: \"#ff629a\"\n                },\n                color: \"textSubtle\",\n                fontSize: \"15px\",\n                mb: \"10px\",\n                children: noLiquidity ? 'Initial prices and pool share' : 'Prices and pool share'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 403,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Pane, {\n                children: /*#__PURE__*/_jsxDEV(PoolPriceBar, {\n                  currencies: currencies,\n                  poolTokenPercentage: poolTokenPercentage,\n                  noLiquidity: noLiquidity,\n                  price: price\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 412,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 411,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 402,\n              columnNumber: 17\n            }, this), !account ? /*#__PURE__*/_jsxDEV(ConnectWalletButton, {\n              fullWidth: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(AutoColumn, {\n              gap: \"md\",\n              children: [(approvalA === ApprovalState.NOT_APPROVED || approvalA === ApprovalState.PENDING || approvalB === ApprovalState.NOT_APPROVED || approvalB === ApprovalState.PENDING) && isValid && /*#__PURE__*/_jsxDEV(RowBetween, {\n                children: [approvalA !== ApprovalState.APPROVED && /*#__PURE__*/_jsxDEV(StyledSwapButton, {\n                  onClick: approveACallback,\n                  disabled: approvalA === ApprovalState.PENDING,\n                  style: {\n                    width: approvalB !== ApprovalState.APPROVED ? '48%' : '100%'\n                  },\n                  children: approvalA === ApprovalState.PENDING ? /*#__PURE__*/_jsxDEV(Dots, {\n                    children: [\"Approving \", (_currencies$Field$CUR9 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR9 === void 0 ? void 0 : _currencies$Field$CUR9.symbol]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 439,\n                    columnNumber: 31\n                  }, this) : `Approve ${(_currencies$Field$CUR10 = currencies[Field.CURRENCY_A]) === null || _currencies$Field$CUR10 === void 0 ? void 0 : _currencies$Field$CUR10.symbol}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 433,\n                  columnNumber: 27\n                }, this), approvalB !== ApprovalState.APPROVED && /*#__PURE__*/_jsxDEV(StyledSwapButton, {\n                  onClick: approveBCallback,\n                  disabled: approvalB === ApprovalState.PENDING,\n                  style: {\n                    width: approvalA !== ApprovalState.APPROVED ? '48%' : '100%'\n                  },\n                  children: approvalB === ApprovalState.PENDING ? /*#__PURE__*/_jsxDEV(Dots, {\n                    children: [\"Approving \", (_currencies$Field$CUR11 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR11 === void 0 ? void 0 : _currencies$Field$CUR11.symbol]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 452,\n                    columnNumber: 31\n                  }, this) : `Approve ${(_currencies$Field$CUR12 = currencies[Field.CURRENCY_B]) === null || _currencies$Field$CUR12 === void 0 ? void 0 : _currencies$Field$CUR12.symbol}`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 446,\n                  columnNumber: 27\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 431,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(StyledSwapButton, {\n                onClick: () => {\n                  if (expertMode) {\n                    onAdd();\n                  } else {\n                    setShowConfirm(true);\n                  }\n                },\n                disabled: !isValid || approvalA !== ApprovalState.APPROVED || approvalB !== ApprovalState.APPROVED,\n                variant: !isValid && !!parsedAmounts[Field.CURRENCY_A] && !!parsedAmounts[Field.CURRENCY_B] ? 'danger' : 'primary',\n                fullWidth: true,\n                children: error !== null && error !== void 0 ? error : 'Supply'\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 425,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 342,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 7\n    }, this), pair && !noLiquidity && pairState !== PairState.INVALID ? /*#__PURE__*/_jsxDEV(AutoColumn, {\n      style: {\n        minWidth: '20rem',\n        marginTop: '1rem'\n      },\n      children: /*#__PURE__*/_jsxDEV(MinimalPositionCard, {\n        showUnwrapped: oneCurrencyIsWETH,\n        pair: pair\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 9\n    }, this) : null]\n  }, void 0, true);\n}\n\n_s(AddLiquidity, \"BKE2sDnzyE6gjWYMqP29rz++Nts=\", false, function () {\n  return [useActiveWeb3React, useCurrency, useCurrency, useIsExpertMode, useMintState, useDerivedMintInfo, useMintActionHandlers, useUserDeadline, useUserSlippageTolerance, useApproveCallback, useApproveCallback, useTransactionAdder];\n});\n\n_c5 = AddLiquidity;\n\nvar _c, _c2, _c3, _c4, _c5;\n\n$RefreshReg$(_c, \"StyledSwapButton\");\n$RefreshReg$(_c2, \"StyledAutoColumn\");\n$RefreshReg$(_c3, \"StyledUIKitText\");\n$RefreshReg$(_c4, \"RedStyledUIKitText\");\n$RefreshReg$(_c5, \"AddLiquidity\");","map":{"version":3,"sources":["/home/someone/kucoin/tesnet20_08/amm-front/src/pages/AddLiquidity/index.tsx"],"names":["React","useCallback","useState","styled","BigNumber","currencyEquals","ETHER","WETH","Button","CardBody","AddIcon","Text","UIKitText","Flex","LightCard","AutoColumn","ColumnCenter","TransactionConfirmationModal","ConfirmationModalContent","CardNav","CurrencyInputPanel","DoubleCurrencyLogo","AddRemoveTabs","MinimalPositionCard","Row","RowBetween","RowFlat","PairState","useActiveWeb3React","useCurrency","ApprovalState","useApproveCallback","Field","useDerivedMintInfo","useMintActionHandlers","useMintState","useTransactionAdder","useIsExpertMode","useUserDeadline","useUserSlippageTolerance","TYPE","calculateGasMargin","calculateSlippageAmount","getRouterContract","maxAmountSpend","wrappedCurrency","currencyId","Pane","ConnectWalletButton","AppBody","Dots","Wrapper","ConfirmAddModalBottom","PoolPriceBar","ROUTER_ADDRESS","italic","Italic","StyledSwapButton","StyledAutoColumn","StyledUIKitText","RedStyledUIKitText","AddLiquidity","match","params","currencyIdA","currencyIdB","history","account","chainId","library","currencyA","currencyB","oneCurrencyIsWETH","Boolean","expertMode","independentField","typedValue","otherTypedValue","dependentField","currencies","pair","pairState","currencyBalances","parsedAmounts","price","noLiquidity","liquidityMinted","poolTokenPercentage","error","undefined","onFieldAInput","onFieldBInput","isValid","showConfirm","setShowConfirm","attemptingTxn","setAttemptingTxn","deadline","allowedSlippage","txHash","setTxHash","formattedAmounts","toSignificant","maxAmounts","CURRENCY_A","CURRENCY_B","reduce","accumulator","field","atMaxAmounts","equalTo","approvalA","approveACallback","approvalB","approveBCallback","addTransaction","onAdd","router","parsedAmountA","parsedAmountB","amountsMin","deadlineFromNow","Math","ceil","Date","now","estimate","method","args","value","tokenBIsETH","estimateGas","addLiquidityETH","address","raw","toString","from","addLiquidity","then","estimatedGasLimit","gasLimit","response","summary","symbol","hash","catch","e","code","console","modalHeader","marginTop","modalBottom","pendingText","handleCurrencyASelect","currA","newCurrencyIdA","push","handleCurrencyBSelect","currB","newCurrencyIdB","handleDismissConfirmation","toExact","INVALID","textTransform","fontWeight","textAlign","color","NOT_APPROVED","PENDING","APPROVED","width","minWidth"],"mappings":"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","sourcesContent":["import React, { useCallback, useState } from 'react'\nimport styled from 'styled-components'\nimport { BigNumber } from '@ethersproject/bignumber'\nimport { TransactionResponse } from '@ethersproject/providers'\nimport { Currency, currencyEquals, ETHER, TokenAmount, WETH } from '@pancakeswap-libs/sdk-v2'\nimport { Button, CardBody, AddIcon, Text as UIKitText, Flex } from '@pancakeswap-libs/uikit'\nimport { RouteComponentProps } from 'react-router-dom'\nimport { LightCard } from 'components/Card'\nimport { AutoColumn, ColumnCenter } from 'components/Column'\nimport TransactionConfirmationModal, { ConfirmationModalContent } from 'components/TransactionConfirmationModal'\nimport CardNav from 'components/CardNav'\nimport CurrencyInputPanel from 'components/CurrencyInputPanel'\nimport DoubleCurrencyLogo from 'components/DoubleLogo'\nimport { AddRemoveTabs } from 'components/NavigationTabs'\nimport { MinimalPositionCard } from 'components/PositionCard'\nimport Row, { RowBetween, RowFlat } from 'components/Row'\n\nimport { PairState } from 'data/Reserves'\nimport { useActiveWeb3React } from 'hooks'\nimport { useCurrency } from 'hooks/Tokens'\nimport { ApprovalState, useApproveCallback } from 'hooks/useApproveCallback'\nimport { Field } from 'state/mint/actions'\nimport { useDerivedMintInfo, useMintActionHandlers, useMintState } from 'state/mint/hooks'\n\nimport { useTransactionAdder } from 'state/transactions/hooks'\nimport { useIsExpertMode, useUserDeadline, useUserSlippageTolerance } from 'state/user/hooks'\nimport { TYPE } from 'components/Shared'\nimport { calculateGasMargin, calculateSlippageAmount, getRouterContract } from 'utils'\nimport { maxAmountSpend } from 'utils/maxAmountSpend'\nimport { wrappedCurrency } from 'utils/wrappedCurrency'\nimport { currencyId } from 'utils/currencyId'\nimport Pane from 'components/Pane'\nimport ConnectWalletButton from 'components/ConnectWalletButton'\nimport AppBody from '../AppBody'\nimport { Dots, Wrapper } from '../Pool/styleds'\nimport { ConfirmAddModalBottom } from './ConfirmAddModalBottom'\nimport { PoolPriceBar } from './PoolPriceBar'\nimport { ROUTER_ADDRESS } from '../../constants'\n\nconst { italic: Italic } = TYPE\n\nconst StyledSwapButton = styled(Button)`\n  background-color: #48cae4;\n  box-shadow: none;\n  transition: all 0.2s ease-in-out;\n  border: 2px solid white;\n  font-size: 20px;\n  font-weight: 600;\n\n  &:hover {\n    background-color: #fff;\n    border: 2px solid #48cae4 !important;\n    color: #48cae4;\n\n    & > svg,\n    & > svg > * {\n      fill: #48cae4;\n    }\n  }\n\n  &:focus {\n    box-shadow: none !important;\n  }\n\n  &:active {\n    background-color: #fff;\n  }\n`\nconst StyledAutoColumn = styled(AutoColumn)`\n  display : flex;\n\n  & > img {\n    margin-right: 25px;\n  }\n`\n\nconst StyledUIKitText = styled(UIKitText)`\n  text-align: justify;\n`\n\nconst RedStyledUIKitText = styled (StyledUIKitText)`\n  color: #ff629a;\n  font-weight: 600;\n`\n\nexport default function AddLiquidity({\n  match: {\n    params: { currencyIdA, currencyIdB },\n  },\n  history,\n}: RouteComponentProps<{ currencyIdA?: string; currencyIdB?: string }>) {\n  const { account, chainId, library } = useActiveWeb3React()\n  const currencyA = useCurrency(currencyIdA)\n  const currencyB = useCurrency(currencyIdB)\n\n  const oneCurrencyIsWETH = Boolean(\n    chainId &&\n      ((currencyA && currencyEquals(currencyA, WETH[chainId])) ||\n        (currencyB && currencyEquals(currencyB, WETH[chainId])))\n  )\n  const expertMode = useIsExpertMode()\n\n  // mint state\n  const { independentField, typedValue, otherTypedValue } = useMintState()\n  const {\n    dependentField,\n    currencies,\n    pair,\n    pairState,\n    currencyBalances,\n    parsedAmounts,\n    price,\n    noLiquidity,\n    liquidityMinted,\n    poolTokenPercentage,\n    error,\n  } = useDerivedMintInfo(currencyA ?? undefined, currencyB ?? undefined)\n  const { onFieldAInput, onFieldBInput } = useMintActionHandlers(noLiquidity)\n\n  const isValid = !error\n\n  // modal and loading\n  const [showConfirm, setShowConfirm] = useState<boolean>(false)\n  const [attemptingTxn, setAttemptingTxn] = useState<boolean>(false) // clicked confirm\n\n  // txn values\n  const [deadline] = useUserDeadline() // custom from users settings\n  const [allowedSlippage] = useUserSlippageTolerance() // custom from users\n  const [txHash, setTxHash] = useState<string>('')\n\n  // get formatted amounts\n  const formattedAmounts = {\n    [independentField]: typedValue,\n    [dependentField]: noLiquidity ? otherTypedValue : parsedAmounts[dependentField]?.toSignificant(6) ?? '',\n  }\n\n  // get the max amounts user can add\n  const maxAmounts: { [field in Field]?: TokenAmount } = [Field.CURRENCY_A, Field.CURRENCY_B].reduce(\n    (accumulator, field) => {\n      return {\n        ...accumulator,\n        [field]: maxAmountSpend(currencyBalances[field]),\n      }\n    },\n    {}\n  )\n\n  const atMaxAmounts: { [field in Field]?: TokenAmount } = [Field.CURRENCY_A, Field.CURRENCY_B].reduce(\n    (accumulator, field) => {\n      return {\n        ...accumulator,\n        [field]: maxAmounts[field]?.equalTo(parsedAmounts[field] ?? '0'),\n      }\n    },\n    {}\n  )\n\n  // check whether the user has approved the router on the tokens\n  const [approvalA, approveACallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_A], ROUTER_ADDRESS)\n  const [approvalB, approveBCallback] = useApproveCallback(parsedAmounts[Field.CURRENCY_B], ROUTER_ADDRESS)\n\n  const addTransaction = useTransactionAdder()\n\n  async function onAdd() {\n    if (!chainId || !library || !account) return\n    const router = getRouterContract(chainId, library, account)\n\n    const { [Field.CURRENCY_A]: parsedAmountA, [Field.CURRENCY_B]: parsedAmountB } = parsedAmounts\n    if (!parsedAmountA || !parsedAmountB || !currencyA || !currencyB) {\n      return\n    }\n\n    const amountsMin = {\n      [Field.CURRENCY_A]: calculateSlippageAmount(parsedAmountA, noLiquidity ? 0 : allowedSlippage)[0],\n      [Field.CURRENCY_B]: calculateSlippageAmount(parsedAmountB, noLiquidity ? 0 : allowedSlippage)[0],\n    }\n\n    const deadlineFromNow = Math.ceil(Date.now() / 1000) + deadline\n\n    let estimate\n    let method: (...args: any) => Promise<TransactionResponse>\n    let args: Array<string | string[] | number>\n    let value: BigNumber | null\n    if (currencyA === ETHER || currencyB === ETHER) {\n      const tokenBIsETH = currencyB === ETHER\n      estimate = router.estimateGas.addLiquidityETH\n      method = router.addLiquidityETH\n      args = [\n        wrappedCurrency(tokenBIsETH ? currencyA : currencyB, chainId)?.address ?? '', // token\n        (tokenBIsETH ? parsedAmountA : parsedAmountB).raw.toString(), // token desired\n        amountsMin[tokenBIsETH ? Field.CURRENCY_A : Field.CURRENCY_B].toString(), // token min\n        amountsMin[tokenBIsETH ? Field.CURRENCY_B : Field.CURRENCY_A].toString(), // eth min\n        account,\n        deadlineFromNow,\n      ]\n      value = BigNumber.from((tokenBIsETH ? parsedAmountB : parsedAmountA).raw.toString())\n    } else {\n      estimate = router.estimateGas.addLiquidity\n      method = router.addLiquidity\n      args = [\n        wrappedCurrency(currencyA, chainId)?.address ?? '',\n        wrappedCurrency(currencyB, chainId)?.address ?? '',\n        parsedAmountA.raw.toString(),\n        parsedAmountB.raw.toString(),\n        amountsMin[Field.CURRENCY_A].toString(),\n        amountsMin[Field.CURRENCY_B].toString(),\n        account,\n        deadlineFromNow,\n      ]\n      value = null\n    }\n\n    setAttemptingTxn(true)\n    // const aa = await estimate(...args, value ? { value } : {})\n    await estimate(...args, value ? { value } : {})\n      .then((estimatedGasLimit) =>\n        method(...args, {\n          ...(value ? { value } : {}),\n          gasLimit: calculateGasMargin(estimatedGasLimit),\n        }).then((response) => {\n          setAttemptingTxn(false)\n\n          addTransaction(response, {\n            summary: `Add ${parsedAmounts[Field.CURRENCY_A]?.toSignificant(3)} ${\n              currencies[Field.CURRENCY_A]?.symbol\n            } and ${parsedAmounts[Field.CURRENCY_B]?.toSignificant(3)} ${currencies[Field.CURRENCY_B]?.symbol}`,\n          })\n\n          setTxHash(response.hash)\n        })\n      )\n      .catch((e) => {\n        setAttemptingTxn(false)\n        // we only care if the error is something _other_ than the user rejected the tx\n        if (e?.code !== 4001) {\n          console.error(e)\n        }\n      })\n  }\n\n  const modalHeader = () => {\n    return noLiquidity ? (\n      <AutoColumn gap=\"20px\">\n        <LightCard mt=\"20px\" borderRadius=\"20px\">\n          <RowFlat>\n            <UIKitText fontSize=\"48px\" mr=\"8px\">\n              {`${currencies[Field.CURRENCY_A]?.symbol}/${currencies[Field.CURRENCY_B]?.symbol}`}\n            </UIKitText>\n            <DoubleCurrencyLogo\n              currency0={currencies[Field.CURRENCY_A]}\n              currency1={currencies[Field.CURRENCY_B]}\n              size={30}\n            />\n          </RowFlat>\n        </LightCard>\n      </AutoColumn>\n    ) : (\n      <AutoColumn gap=\"20px\">\n        <RowFlat style={{ marginTop: '20px' }}>\n          <UIKitText fontSize=\"48px\" mr=\"8px\">\n            {liquidityMinted?.toSignificant(6)}\n          </UIKitText>\n          <DoubleCurrencyLogo\n            currency0={currencies[Field.CURRENCY_A]}\n            currency1={currencies[Field.CURRENCY_B]}\n            size={30}\n          />\n        </RowFlat>\n        <Row>\n          <UIKitText fontSize=\"24px\">\n            {`${currencies[Field.CURRENCY_A]?.symbol}/${currencies[Field.CURRENCY_B]?.symbol} Pool Tokens`}\n          </UIKitText>\n        </Row>\n        <Italic fontSize={12} textAlign=\"center\" padding=\"8px 0 0 0 \">\n          {`Estimated price. If the price changes by more than ${\n            allowedSlippage / 100\n          }% your transaction will revert (according to your slippage settings).`}\n        </Italic>\n      </AutoColumn>\n    )\n  }\n\n  const modalBottom = () => {\n    return (\n      <ConfirmAddModalBottom\n        price={price}\n        currencies={currencies}\n        parsedAmounts={parsedAmounts}\n        noLiquidity={noLiquidity}\n        onAdd={onAdd}\n        poolTokenPercentage={poolTokenPercentage}\n      />\n    )\n  }\n\n  const pendingText = `Supplying ${parsedAmounts[Field.CURRENCY_A]?.toSignificant(6)} ${\n    currencies[Field.CURRENCY_A]?.symbol\n  } and ${parsedAmounts[Field.CURRENCY_B]?.toSignificant(6)} ${currencies[Field.CURRENCY_B]?.symbol}`\n\n  const handleCurrencyASelect = useCallback(\n    (currA: Currency) => {\n      const newCurrencyIdA = currencyId(currA)\n      if (newCurrencyIdA === currencyIdB) {\n        history.push(`/add/${currencyIdB}/${currencyIdA}`)\n      } else {\n        history.push(`/add/${newCurrencyIdA}/${currencyIdB}`)\n      }\n    },\n    [currencyIdB, history, currencyIdA]\n  )\n  const handleCurrencyBSelect = useCallback(\n    (currB: Currency) => {\n      const newCurrencyIdB = currencyId(currB)\n      if (currencyIdA === newCurrencyIdB) {\n        if (currencyIdB) {\n          history.push(`/add/${currencyIdB}/${newCurrencyIdB}`)\n        } else {\n          history.push(`/add/${newCurrencyIdB}`)\n        }\n      } else {\n        history.push(`/add/${currencyIdA || 'ETH'}/${newCurrencyIdB}`)\n      }\n    },\n    [currencyIdA, history, currencyIdB]\n  )\n\n  const handleDismissConfirmation = useCallback(() => {\n    setShowConfirm(false)\n    // if there was a tx hash, we want to clear the input\n    if (txHash) {\n      onFieldAInput('')\n    }\n    setTxHash('')\n  }, [onFieldAInput, txHash])\n\n  return (\n    <>\n      <CardNav activeIndex={1} />\n      <AppBody>\n        \n        <AddRemoveTabs adding />\n        <Wrapper>\n          <TransactionConfirmationModal\n            isOpen={showConfirm}\n            onDismiss={handleDismissConfirmation}\n            attemptingTxn={attemptingTxn}\n            hash={txHash}\n            content={() => (\n              <ConfirmationModalContent\n                title={noLiquidity ? 'You are creating a pool' : 'You will receive'}\n                onDismiss={handleDismissConfirmation}\n                topContent={modalHeader}\n                bottomContent={modalBottom}\n              />\n            )}\n            pendingText={pendingText}\n          />\n          <CardBody>\n            <AutoColumn gap=\"20px\">\n              {noLiquidity && (\n                <ColumnCenter>\n                  <Pane>\n                    <StyledAutoColumn gap=\"12px\">\n                      <img src='/images/common/cupcake-analyst.png' alt=\"analyst\" width={190}/>\n                      <Flex flexDirection=\"column\" alignItems=\"flex-start\" justifyContent=\"space-evenly\">\n                      <RedStyledUIKitText> You are the first liquidity provider!</RedStyledUIKitText>\n                      <StyledUIKitText>The ratio of tokens you add will set the price of this pool.</StyledUIKitText>\n                      <StyledUIKitText>Once you are happy with the rate click supply to review.</StyledUIKitText>\n                      </Flex>\n                    </StyledAutoColumn>\n                  </Pane>\n                </ColumnCenter>\n              )}\n              <CurrencyInputPanel\n                value={formattedAmounts[Field.CURRENCY_A]}\n                onUserInput={onFieldAInput}\n                onMax={() => {\n                  onFieldAInput(maxAmounts[Field.CURRENCY_A]?.toExact() ?? '')\n                }}\n                onCurrencySelect={handleCurrencyASelect}\n                showMaxButton={!atMaxAmounts[Field.CURRENCY_A]}\n                currency={currencies[Field.CURRENCY_A]}\n                id=\"add-liquidity-input-tokena\"\n                showCommonBases={false}\n              />\n              <ColumnCenter>\n                <AddIcon color=\"textSubtle\" />\n              </ColumnCenter>\n              <CurrencyInputPanel\n                value={formattedAmounts[Field.CURRENCY_B]}\n                onUserInput={onFieldBInput}\n                onCurrencySelect={handleCurrencyBSelect}\n                onMax={() => {\n                  onFieldBInput(maxAmounts[Field.CURRENCY_B]?.toExact() ?? '')\n                }}\n                showMaxButton={!atMaxAmounts[Field.CURRENCY_B]}\n                currency={currencies[Field.CURRENCY_B]}\n                id=\"add-liquidity-input-tokenb\"\n                showCommonBases={false}\n              />\n              {currencies[Field.CURRENCY_A] && currencies[Field.CURRENCY_B] && pairState !== PairState.INVALID && (\n                <div>\n                  <StyledUIKitText\n                    style={{ textTransform: 'uppercase', fontWeight: 600, textAlign:\"center\", color:\"#ff629a\" }}\n                    color=\"textSubtle\"\n                    fontSize=\"15px\"\n                    mb=\"10px\"\n                  >\n                    {noLiquidity ? 'Initial prices and pool share' : 'Prices and pool share'}\n                  </StyledUIKitText>\n                  <Pane>\n                    <PoolPriceBar\n                      currencies={currencies}\n                      poolTokenPercentage={poolTokenPercentage}\n                      noLiquidity={noLiquidity}\n                      price={price}\n                    />\n                  </Pane>\n                </div>\n              )}\n\n              {!account ? (\n                <ConnectWalletButton fullWidth />\n              ) : (\n                <AutoColumn gap=\"md\">\n                  {(approvalA === ApprovalState.NOT_APPROVED ||\n                    approvalA === ApprovalState.PENDING ||\n                    approvalB === ApprovalState.NOT_APPROVED ||\n                    approvalB === ApprovalState.PENDING) &&\n                    isValid && (\n                      <RowBetween>\n                        {approvalA !== ApprovalState.APPROVED && (\n                          <StyledSwapButton\n                            onClick={approveACallback}\n                            disabled={approvalA === ApprovalState.PENDING}\n                            style={{ width: approvalB !== ApprovalState.APPROVED ? '48%' : '100%' }}\n                          >\n                            {approvalA === ApprovalState.PENDING ? (\n                              <Dots>Approving {currencies[Field.CURRENCY_A]?.symbol}</Dots>\n                            ) : (\n                              `Approve ${currencies[Field.CURRENCY_A]?.symbol}`\n                            )}\n                          </StyledSwapButton>\n                        )}\n                        {approvalB !== ApprovalState.APPROVED && (\n                          <StyledSwapButton\n                            onClick={approveBCallback}\n                            disabled={approvalB === ApprovalState.PENDING}\n                            style={{ width: approvalA !== ApprovalState.APPROVED ? '48%' : '100%' }}\n                          >\n                            {approvalB === ApprovalState.PENDING ? (\n                              <Dots>Approving {currencies[Field.CURRENCY_B]?.symbol}</Dots>\n                            ) : (\n                              `Approve ${currencies[Field.CURRENCY_B]?.symbol}`\n                            )}\n                          </StyledSwapButton>\n                        )}\n                      </RowBetween>\n                    )}\n                  <StyledSwapButton\n                    onClick={() => {\n                      if (expertMode) {\n                        onAdd()\n                      } else {\n                        setShowConfirm(true)\n                      }\n                    }}\n                    disabled={!isValid || approvalA !== ApprovalState.APPROVED || approvalB !== ApprovalState.APPROVED}\n                    variant={\n                      !isValid && !!parsedAmounts[Field.CURRENCY_A] && !!parsedAmounts[Field.CURRENCY_B]\n                        ? 'danger'\n                        : 'primary'\n                    }\n                    fullWidth\n                  >\n                    {error ?? 'Supply'}\n                  </StyledSwapButton>\n                </AutoColumn>\n              )}\n            </AutoColumn>\n          </CardBody>\n        </Wrapper>\n      </AppBody>\n      {pair && !noLiquidity && pairState !== PairState.INVALID ? (\n        <AutoColumn style={{ minWidth: '20rem', marginTop: '1rem' }}>\n          <MinimalPositionCard showUnwrapped={oneCurrencyIsWETH} pair={pair} />\n        </AutoColumn>\n      ) : null}\n    </>\n  )\n}\n"]},"metadata":{},"sourceType":"module"}